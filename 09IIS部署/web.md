## Web服务器部署

### web服务器协议

web服务器使用的协议是 HTTP 或 HTTPS

HTTP协议端口号：TCP 80

HTTPS协议端口号：TCP 443

### web服务器类型

微软：IIS（可以发布web网站和FTP站点）

LInux：Apache/LAMP/Tomcat/nginx

第三方：phpstudy, XAMPP

### 部署web服务器

1. 配置静态地址
2. 点击光驱，安装windows组件
3. 点击 应用程序服务器， 点击IIS
4. 选择万维网服务
5. 安装
6. 这个时候端口 80 和 443 就已经打开了

### 默认网站

安装好web服务器之后，会有一个默认网站，默认网站在 windows 的位置是`C:\Inetpub\wwwroot`

如果把默认网站删了或者禁用了，那么对一个的 80 和 443 端口也关闭了，因为没有网站向外开放了。

### 新建网站

1. `网站`右键新建网站，命名网站
2. 网站IP地址，当该服务器有多个网卡时，就意味着有多个IP，默认（全部未分配）意味着所有IP都可以访问。由于服务器只有一个IP地址，所以选择 10.1.1.1
3. 新建一个网站的文件夹`D:\qq\`， 编写一个简单的网页`index.html`，将路径设为 `D:\qq`
4. 完成后可以看到新的网站叫做QQ
5. 点击QQ右键属性，点击`目录安全性` - `编辑`，启用`匿名访问`, 从中可以看到用户`IUSER_WIN7_1`，这是搭建IIS服务器时就已经创建的用户。
6. 点击文档，添加 index.html 并且上移为最高位置，就可以设置为首页。

### 多个网站

#### 方法一

给一个服务器配置多个IP地址

1. 在配置IP页面，点击高级，添加IP地址10.1.1.4
2. 新建网站TT，和添加QQ类似，注意的点就是选择IP地址为 10.1.1.4

#### 方法二

给另外一个网站配置另一个端口

1. 新建站点时，IP选择为 10.1.1.1, 同时端口号选择为 8000, 通常习惯为 (8080, 8081...)
2. 那么访问TT网站，就应该访问 `10.1.1.1:8000`加上端口号访问。

#### 方法三

由于站点的识别可以通过 `IP 地址`，`TCP端口`, `主机头值`来分别，接下来就用不同的`主机头值`来区分不同的网站。在DNS服务器中，我们可以创建连个不同的主机`www.QQ.com`和`www.TT.com`, 但是让这两个网站的IP地址相同。这是因为**同一个IP地址可以有不同的域名**。所以我们让IP地址相同，端口号相同，但是让两个网站绑定不同的域名（主机名）。

1. 在dns服务中，新建两个区域 QQ.com 和 TT.com ，再在两个区域中分别新建两个主机www
2. 在IIS服务中,右键属性,点击高级, 让两个网站的IP地址和端口号相同，但是绑定不同的主机头值．

### 网站多域名

此方法由　多网站　的方法三引出的．当我们设置不同的主机头值来标识不同网站时，我们不能使用IP来访问任何网站了，这个时候，我们就要用到网站多域名，或者说网站多标识．

1. 对我们需要用IP地址访问的网站右键属性,高级. 可以看到 `高级网站标识`, 我们可以点击`添加`, 这个时候,我们只设置IP地址为 10.1.1.1, TCP 端口为 80, 但是**不设置主机头值**, 这样子就可以使用IP地址访问该网站了.
2. 不仅如此,我们还可以继续`添加`, 添加不同的`主机头值`,这样子我们就可以实现多个域名访问同一网站.

### 网站类型

1. 静态网站: 一般扩展名为.html或.htm, 无后台数据库
2. 动态网站: 一般扩展为.asp或.php, 由后台数据库, asp 或 php 可以连接前台页面和后台数据库

### 动态网站创建

假定该网站也是用域名访问.

1. 创建主机 leichi.QQ.com
2. 创建网站leichi, 在权限页面, 勾选读取, 运行脚本, 执行
3. 设置首页
4. 在IIS的 `web服务扩展`中开启 `Active Server Page`(ASP), 即可访问.

有些目录下的路径无法访问,这是因为没有开启 `父路径`

1. 右键该网站, 属性
2. 点击 `主目录` - `配置` - `选项` - `启用父路径`